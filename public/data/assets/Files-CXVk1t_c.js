import{r as x,I as K,a as J,j as h,S as L,T as re,B as N,f as Ae,a1 as et,i as Pt,y as w,a0 as zt}from"./index-DzaOA67_.js";import{u as tt,D as Ut,F as P,b as nt}from"./index-sNGHL25X.js";import{e as Gt,d as V,C as st,v as Wt,s as F,S as ue,a as H,f as qt,T as Ht}from"./fileValidation-AnOVqnKf.js";import{u as Yt,R as Kt}from"./index-BNVjEioM.js";import{E as Jt,R as at,I as rt,b as Vt,a as Xt}from"./SearchOutlined-bdrymOyE.js";import{R as Z}from"./FileOutlined-BhB1Rg8V.js";import{R as Zt,a as ot,b as Qt,r as en,c as tn,u as nn}from"./index-CMw1GDUG.js";import{R as ct,a as sn}from"./EditOutlined-DfIeviW7.js";import{R as it}from"./DeleteOutlined-BXI_xhMw.js";import{M as pe}from"./index-C7hRAURT.js";import{R as an}from"./CheckOutlined-Dzgg9XeN.js";import{A as Fe}from"./index-oKRoomyI.js";import"./tslib.es6-DBPwE56R.js";var rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},on={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"},cn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},ln=function(t,s){return x.createElement(K,J({},t,{ref:s,icon:Gt}))},bn=x.forwardRef(ln),fn=function(t,s){return x.createElement(K,J({},t,{ref:s,icon:rn}))},Q=x.forwardRef(fn),dn=function(t,s){return x.createElement(K,J({},t,{ref:s,icon:Jt}))},un=x.forwardRef(dn),hn=function(t,s){return x.createElement(K,J({},t,{ref:s,icon:on}))},lt=x.forwardRef(hn),pn=function(t,s){return x.createElement(K,J({},t,{ref:s,icon:cn}))},gn=x.forwardRef(pn);class ge{static async getFileUsage(t){const s=await V.pythonCode.where("fileId").equals(t).toArray(),b=await V.sqlQueries.filter(n=>n.fileIds.includes(t)).toArray();return{fileId:t,pythonScripts:s.length,sqlScripts:b.map(n=>({id:n.id,name:n.name})),totalUsages:s.length+b.length}}static async getAllFileUsages(){const t=await V.pythonCode.toArray(),s=await V.sqlQueries.toArray(),b=new Map,n=new Map;for(const c of t)n.set(c.fileId,(n.get(c.fileId)||0)+1);const a=new Map;for(const c of s)for(const o of c.fileIds){const l=a.get(o)||[];l.push({id:c.id,name:c.name}),a.set(o,l)}const r=new Set([...n.keys(),...a.keys()]);for(const c of r){const o=n.get(c)||0,l=a.get(c)||[];b.set(c,{fileId:c,pythonScripts:o,sqlScripts:l,totalUsages:o+l.length})}return b}static async canDeleteFile(t){const s=await this.getFileUsage(t),b=[];if(s.pythonScripts>0&&b.push(`Used in ${s.pythonScripts} Python script${s.pythonScripts>1?"s":""}`),s.sqlScripts.length>0){const n=s.sqlScripts.map(a=>a.name).join(", ");b.push(`Used in ${s.sqlScripts.length} SQL script${s.sqlScripts.length>1?"s":""}: ${n}`)}return{canDelete:b.length===0,warnings:b}}}function mn(){const[e,t]=x.useState(new Map),[s,b]=x.useState(!1),n=x.useCallback(async()=>{b(!0);try{const a=await ge.getAllFileUsages();t(a)}finally{b(!1)}},[]);return x.useEffect(()=>{n()},[n]),{usages:e,loading:s,refresh:n}}const{Text:$}=re,bt=x.memo(({onUploadComplete:e})=>{const{uploadFile:t}=tt(),s=async r=>{let c=0,o=0;for(const l of r){const f=Wt(l);if(!f.valid){F.error(`${l.name}: ${f.error}`),o++;continue}f.warning&&F.warning(`${l.name}: ${f.warning}`);try{await t(l),c++}catch(u){console.error("Upload error:",u),F.error(`Failed to upload "${l.name}"`),o++}}c>0&&(F.success(`Successfully uploaded ${c} file${c>1?"s":""}`),e==null||e()),o>0&&F.error(`Failed to upload ${o} file${o>1?"s":""}`)},{getRootProps:b,getInputProps:n,isDragActive:a}=Yt({onDrop:s,accept:{"text/csv":[".csv"],"application/json":[".json"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/octet-stream":[".parquet"]},multiple:!0});return h.jsxs(st,{...b(),style:{cursor:"pointer",borderStyle:"dashed",borderWidth:2,borderColor:a?"#1890ff":"#d9d9d9",backgroundColor:a?"#e6f7ff":"transparent",transition:"all 0.3s"},children:[h.jsx("input",{...n()}),h.jsxs(L,{orientation:"vertical",align:"center",style:{width:"100%",padding:"24px 0"},children:[h.jsx(Kt,{style:{fontSize:48,color:a?"#1890ff":"#bfbfbf"}}),h.jsx($,{strong:!0,style:{fontSize:16},children:a?"Drop files here":"Click or drag files to upload"}),h.jsxs(L,{size:"small",children:[h.jsx(at,{}),h.jsx($,{type:"secondary",children:"CSV"}),h.jsx(Z,{}),h.jsx($,{type:"secondary",children:"JSON"}),h.jsx(lt,{}),h.jsx($,{type:"secondary",children:"XLSX"}),h.jsx(Z,{}),h.jsx($,{type:"secondary",children:"Parquet"})]}),h.jsx($,{type:"secondary",style:{fontSize:12},children:"Maximum file size: 200MB"})]})]})});bt.displayName="FileUploadZone";const{Option:D}=ue,ft=x.memo(({searchTerm:e,onSearchChange:t,fileTypeFilter:s,onFileTypeChange:b,sortBy:n,onSortChange:a,onClear:r})=>h.jsxs(L,{size:"middle",wrap:!0,children:[h.jsx(rt,{placeholder:"Search files...",prefix:h.jsx(Vt,{}),value:e,onChange:c=>t(c.target.value),allowClear:!0,style:{width:250}}),h.jsxs(ue,{value:s,onChange:b,style:{width:120},placeholder:"File Type",children:[h.jsx(D,{value:"all",children:"All Types"}),h.jsx(D,{value:"csv",children:"CSV"}),h.jsx(D,{value:"json",children:"JSON"}),h.jsx(D,{value:"xlsx",children:"XLSX"}),h.jsx(D,{value:"parquet",children:"Parquet"})]}),h.jsxs(ue,{value:n,onChange:a,style:{width:150},placeholder:"Sort By",children:[h.jsx(D,{value:"uploadedAt-desc",children:"Newest First"}),h.jsx(D,{value:"uploadedAt-asc",children:"Oldest First"}),h.jsx(D,{value:"name-asc",children:"Name (A-Z)"}),h.jsx(D,{value:"name-desc",children:"Name (Z-A)"}),h.jsx(D,{value:"size-desc",children:"Size (Largest)"}),h.jsx(D,{value:"size-asc",children:"Size (Smallest)"})]}),(e||s!=="all"||n!=="uploadedAt-desc")&&h.jsx(N,{icon:h.jsx(Zt,{}),onClick:r,children:"Clear Filters"})]}));ft.displayName="FileFilters";const dt=x.memo(({usage:e,loading:t})=>{if(t)return h.jsx(H,{children:"Loading..."});if(!e||e.totalUsages===0)return h.jsx(H,{color:"default",children:"Unused"});const s=e.pythonScripts>0?`Used in ${e.pythonScripts} Python script${e.pythonScripts>1?"s":""}`:null,b=e.sqlScripts.length>0?`Used in SQL scripts: ${e.sqlScripts.map(n=>n.name).join(", ")}`:null;return h.jsxs(L,{size:4,children:[e.pythonScripts>0&&h.jsx(Ae,{title:s,children:h.jsxs(H,{icon:h.jsx(Xt,{}),color:"green",children:[e.pythonScripts," Python"]})}),e.sqlScripts.length>0&&h.jsx(Ae,{title:b,children:h.jsxs(H,{icon:h.jsx(et,{}),color:"blue",children:[e.sqlScripts.length," SQL"]})})]})});dt.displayName="FileUsageTag";const ut=x.memo(({file:e,onPreview:t,onRename:s,onRefresh:b})=>{const n=async()=>{try{await P.downloadFile(e.id),F.success(`Downloaded "${e.name}"`)}catch(o){console.error("Download error:",o),F.error("Failed to download file")}},a=async()=>{try{const o=await P.cloneFile(e.id);F.success(`Cloned as "${o.name}"`),b()}catch(o){console.error("Clone error:",o),F.error("Failed to clone file")}},r=async()=>{try{const{canDelete:o,warnings:l}=await ge.canDeleteFile(e.id),f=o?{title:"Delete File",icon:h.jsx(Q,{}),content:`Are you sure you want to delete "${e.name}"?`,okText:"Delete",okType:"danger"}:{title:"Delete File In Use",icon:h.jsx(Q,{}),content:h.jsxs("div",{children:[h.jsx("p",{children:"This file is currently being used:"}),h.jsx("ul",{children:l.map((u,i)=>h.jsx("li",{children:u},i))}),h.jsx("p",{children:"Deleting this file may break these scripts. Are you sure?"})]}),okText:"Delete Anyway",okType:"danger"};pe.confirm({...f,onOk:async()=>{try{await P.deleteFile(e.id),F.success(`Deleted "${e.name}"`),b()}catch(u){console.error("Delete error:",u),F.error("Failed to delete file")}}})}catch(o){console.error("Delete check error:",o),F.error("Failed to check file usage")}},c=[{key:"preview",label:"Preview",icon:h.jsx(un,{}),onClick:()=>t(e)},{key:"rename",label:"Rename",icon:h.jsx(ct,{}),onClick:()=>s(e)},{key:"clone",label:"Clone",icon:h.jsx(sn,{}),onClick:a},{key:"download",label:"Download",icon:h.jsx(ot,{}),onClick:n},{type:"divider"},{key:"delete",label:"Delete",icon:h.jsx(it,{}),danger:!0,onClick:r}];return h.jsx(Ut,{menu:{items:c},trigger:["click"],children:h.jsx(N,{type:"text",icon:h.jsx(gn,{})})})});ut.displayName="FileRowActions";const{Text:X}=re,ht=x.memo(({files:e,fileUsages:t,usagesLoading:s,selectedRowKeys:b,onSelectionChange:n,onPreview:a,onRefresh:r})=>{const[c,o]=x.useState(null),[l,f]=x.useState(""),u=y=>{switch(y){case"csv":return h.jsx(at,{style:{color:"#52c41a"}});case"json":return h.jsx(Z,{style:{color:"#1890ff"}});case"xlsx":return h.jsx(lt,{style:{color:"#fa8c16"}});case"parquet":return h.jsx(et,{style:{color:"#722ed1"}});default:return h.jsx(Z,{})}},i=y=>{o(y.id),f(y.name)},d=async y=>{if(!l.trim()){F.error("Filename cannot be empty");return}try{await P.renameFile(y,l.trim()),F.success("File renamed successfully"),o(null),r()}catch(v){console.error("Rename error:",v),F.error("Failed to rename file")}},p=()=>{o(null),f("")},g=[{title:"Name",dataIndex:"name",key:"name",width:"35%",render:(y,v)=>c===v.id?h.jsxs(L,{children:[h.jsx(rt,{value:l,onChange:C=>f(C.target.value),onPressEnter:()=>d(v.id),autoFocus:!0,style:{width:300}}),h.jsx(N,{type:"primary",size:"small",icon:h.jsx(an,{}),onClick:()=>d(v.id)}),h.jsx(N,{size:"small",icon:h.jsx(bn,{}),onClick:p})]}):h.jsxs(L,{children:[u(v.fileType),h.jsx(X,{children:y}),h.jsx(N,{type:"text",size:"small",icon:h.jsx(ct,{}),onClick:()=>i(v)})]})},{title:"Type",dataIndex:"fileType",key:"fileType",width:"10%",render:y=>h.jsx(H,{color:y==="csv"?"green":y==="json"?"blue":y==="xlsx"?"orange":"purple",children:y.toUpperCase()})},{title:"Size",dataIndex:"size",key:"size",width:"10%",render:y=>h.jsx(X,{children:qt(y)})},{title:"Uploaded",dataIndex:"uploadedAt",key:"uploadedAt",width:"15%",render:y=>h.jsxs(X,{type:"secondary",children:[new Date(y).toLocaleDateString()," ",new Date(y).toLocaleTimeString()]})},{title:"Usage",key:"usage",width:"20%",render:(y,v)=>h.jsx(dt,{usage:t.get(v.id),loading:s})},{title:"Actions",key:"actions",width:"10%",render:(y,v)=>h.jsx(ut,{file:v,onPreview:a,onRename:i,onRefresh:r})}],m={selectedRowKeys:b,onChange:y=>n(y),preserveSelectedRowKeys:!0};return h.jsx(nt,{rowSelection:m,columns:g,dataSource:e,rowKey:"id",pagination:{defaultPageSize:10,pageSizeOptions:["10","25","50","100"],showSizeChanger:!0,showTotal:(y,v)=>`${v[0]}-${v[1]} of ${y} files`},locale:{emptyText:h.jsx("div",{style:{padding:"40px 0"},children:h.jsx(X,{type:"secondary",children:"No files uploaded yet. Use the upload zone above to add files."})})}})});ht.displayName="FileTable";var oe,_e;function pt(){if(_e)return oe;_e=1;const e=Qt(),t={};for(const n of Object.keys(e))t[e[n]]=n;const s={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};oe=s;for(const n of Object.keys(s)){if(!("channels"in s[n]))throw new Error("missing channels property: "+n);if(!("labels"in s[n]))throw new Error("missing channel labels property: "+n);if(s[n].labels.length!==s[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:a,labels:r}=s[n];delete s[n].channels,delete s[n].labels,Object.defineProperty(s[n],"channels",{value:a}),Object.defineProperty(s[n],"labels",{value:r})}s.rgb.hsl=function(n){const a=n[0]/255,r=n[1]/255,c=n[2]/255,o=Math.min(a,r,c),l=Math.max(a,r,c),f=l-o;let u,i;l===o?u=0:a===l?u=(r-c)/f:r===l?u=2+(c-a)/f:c===l&&(u=4+(a-r)/f),u=Math.min(u*60,360),u<0&&(u+=360);const d=(o+l)/2;return l===o?i=0:d<=.5?i=f/(l+o):i=f/(2-l-o),[u,i*100,d*100]},s.rgb.hsv=function(n){let a,r,c,o,l;const f=n[0]/255,u=n[1]/255,i=n[2]/255,d=Math.max(f,u,i),p=d-Math.min(f,u,i),g=function(m){return(d-m)/6/p+1/2};return p===0?(o=0,l=0):(l=p/d,a=g(f),r=g(u),c=g(i),f===d?o=c-r:u===d?o=1/3+a-c:i===d&&(o=2/3+r-a),o<0?o+=1:o>1&&(o-=1)),[o*360,l*100,d*100]},s.rgb.hwb=function(n){const a=n[0],r=n[1];let c=n[2];const o=s.rgb.hsl(n)[0],l=1/255*Math.min(a,Math.min(r,c));return c=1-1/255*Math.max(a,Math.max(r,c)),[o,l*100,c*100]},s.rgb.cmyk=function(n){const a=n[0]/255,r=n[1]/255,c=n[2]/255,o=Math.min(1-a,1-r,1-c),l=(1-a-o)/(1-o)||0,f=(1-r-o)/(1-o)||0,u=(1-c-o)/(1-o)||0;return[l*100,f*100,u*100,o*100]};function b(n,a){return(n[0]-a[0])**2+(n[1]-a[1])**2+(n[2]-a[2])**2}return s.rgb.keyword=function(n){const a=t[n];if(a)return a;let r=1/0,c;for(const o of Object.keys(e)){const l=e[o],f=b(n,l);f<r&&(r=f,c=o)}return c},s.keyword.rgb=function(n){return e[n]},s.rgb.xyz=function(n){let a=n[0]/255,r=n[1]/255,c=n[2]/255;a=a>.04045?((a+.055)/1.055)**2.4:a/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const o=a*.4124+r*.3576+c*.1805,l=a*.2126+r*.7152+c*.0722,f=a*.0193+r*.1192+c*.9505;return[o*100,l*100,f*100]},s.rgb.lab=function(n){const a=s.rgb.xyz(n);let r=a[0],c=a[1],o=a[2];r/=95.047,c/=100,o/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;const l=116*c-16,f=500*(r-c),u=200*(c-o);return[l,f,u]},s.hsl.rgb=function(n){const a=n[0]/360,r=n[1]/100,c=n[2]/100;let o,l,f;if(r===0)return f=c*255,[f,f,f];c<.5?o=c*(1+r):o=c+r-c*r;const u=2*c-o,i=[0,0,0];for(let d=0;d<3;d++)l=a+1/3*-(d-1),l<0&&l++,l>1&&l--,6*l<1?f=u+(o-u)*6*l:2*l<1?f=o:3*l<2?f=u+(o-u)*(2/3-l)*6:f=u,i[d]=f*255;return i},s.hsl.hsv=function(n){const a=n[0];let r=n[1]/100,c=n[2]/100,o=r;const l=Math.max(c,.01);c*=2,r*=c<=1?c:2-c,o*=l<=1?l:2-l;const f=(c+r)/2,u=c===0?2*o/(l+o):2*r/(c+r);return[a,u*100,f*100]},s.hsv.rgb=function(n){const a=n[0]/60,r=n[1]/100;let c=n[2]/100;const o=Math.floor(a)%6,l=a-Math.floor(a),f=255*c*(1-r),u=255*c*(1-r*l),i=255*c*(1-r*(1-l));switch(c*=255,o){case 0:return[c,i,f];case 1:return[u,c,f];case 2:return[f,c,i];case 3:return[f,u,c];case 4:return[i,f,c];case 5:return[c,f,u]}},s.hsv.hsl=function(n){const a=n[0],r=n[1]/100,c=n[2]/100,o=Math.max(c,.01);let l,f;f=(2-r)*c;const u=(2-r)*o;return l=r*o,l/=u<=1?u:2-u,l=l||0,f/=2,[a,l*100,f*100]},s.hwb.rgb=function(n){const a=n[0]/360;let r=n[1]/100,c=n[2]/100;const o=r+c;let l;o>1&&(r/=o,c/=o);const f=Math.floor(6*a),u=1-c;l=6*a-f,(f&1)!==0&&(l=1-l);const i=r+l*(u-r);let d,p,g;switch(f){default:case 6:case 0:d=u,p=i,g=r;break;case 1:d=i,p=u,g=r;break;case 2:d=r,p=u,g=i;break;case 3:d=r,p=i,g=u;break;case 4:d=i,p=r,g=u;break;case 5:d=u,p=r,g=i;break}return[d*255,p*255,g*255]},s.cmyk.rgb=function(n){const a=n[0]/100,r=n[1]/100,c=n[2]/100,o=n[3]/100,l=1-Math.min(1,a*(1-o)+o),f=1-Math.min(1,r*(1-o)+o),u=1-Math.min(1,c*(1-o)+o);return[l*255,f*255,u*255]},s.xyz.rgb=function(n){const a=n[0]/100,r=n[1]/100,c=n[2]/100;let o,l,f;return o=a*3.2406+r*-1.5372+c*-.4986,l=a*-.9689+r*1.8758+c*.0415,f=a*.0557+r*-.204+c*1.057,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,o=Math.min(Math.max(0,o),1),l=Math.min(Math.max(0,l),1),f=Math.min(Math.max(0,f),1),[o*255,l*255,f*255]},s.xyz.lab=function(n){let a=n[0],r=n[1],c=n[2];a/=95.047,r/=100,c/=108.883,a=a>.008856?a**(1/3):7.787*a+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const o=116*r-16,l=500*(a-r),f=200*(r-c);return[o,l,f]},s.lab.xyz=function(n){const a=n[0],r=n[1],c=n[2];let o,l,f;l=(a+16)/116,o=r/500+l,f=l-c/200;const u=l**3,i=o**3,d=f**3;return l=u>.008856?u:(l-16/116)/7.787,o=i>.008856?i:(o-16/116)/7.787,f=d>.008856?d:(f-16/116)/7.787,o*=95.047,l*=100,f*=108.883,[o,l,f]},s.lab.lch=function(n){const a=n[0],r=n[1],c=n[2];let o;o=Math.atan2(c,r)*360/2/Math.PI,o<0&&(o+=360);const f=Math.sqrt(r*r+c*c);return[a,f,o]},s.lch.lab=function(n){const a=n[0],r=n[1],o=n[2]/360*2*Math.PI,l=r*Math.cos(o),f=r*Math.sin(o);return[a,l,f]},s.rgb.ansi16=function(n,a=null){const[r,c,o]=n;let l=a===null?s.rgb.hsv(n)[2]:a;if(l=Math.round(l/50),l===0)return 30;let f=30+(Math.round(o/255)<<2|Math.round(c/255)<<1|Math.round(r/255));return l===2&&(f+=60),f},s.hsv.ansi16=function(n){return s.rgb.ansi16(s.hsv.rgb(n),n[2])},s.rgb.ansi256=function(n){const a=n[0],r=n[1],c=n[2];return a===r&&r===c?a<8?16:a>248?231:Math.round((a-8)/247*24)+232:16+36*Math.round(a/255*5)+6*Math.round(r/255*5)+Math.round(c/255*5)},s.ansi16.rgb=function(n){let a=n%10;if(a===0||a===7)return n>50&&(a+=3.5),a=a/10.5*255,[a,a,a];const r=(~~(n>50)+1)*.5,c=(a&1)*r*255,o=(a>>1&1)*r*255,l=(a>>2&1)*r*255;return[c,o,l]},s.ansi256.rgb=function(n){if(n>=232){const l=(n-232)*10+8;return[l,l,l]}n-=16;let a;const r=Math.floor(n/36)/5*255,c=Math.floor((a=n%36)/6)/5*255,o=a%6/5*255;return[r,c,o]},s.rgb.hex=function(n){const r=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r},s.hex.rgb=function(n){const a=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!a)return[0,0,0];let r=a[0];a[0].length===3&&(r=r.split("").map(u=>u+u).join(""));const c=parseInt(r,16),o=c>>16&255,l=c>>8&255,f=c&255;return[o,l,f]},s.rgb.hcg=function(n){const a=n[0]/255,r=n[1]/255,c=n[2]/255,o=Math.max(Math.max(a,r),c),l=Math.min(Math.min(a,r),c),f=o-l;let u,i;return f<1?u=l/(1-f):u=0,f<=0?i=0:o===a?i=(r-c)/f%6:o===r?i=2+(c-a)/f:i=4+(a-r)/f,i/=6,i%=1,[i*360,f*100,u*100]},s.hsl.hcg=function(n){const a=n[1]/100,r=n[2]/100,c=r<.5?2*a*r:2*a*(1-r);let o=0;return c<1&&(o=(r-.5*c)/(1-c)),[n[0],c*100,o*100]},s.hsv.hcg=function(n){const a=n[1]/100,r=n[2]/100,c=a*r;let o=0;return c<1&&(o=(r-c)/(1-c)),[n[0],c*100,o*100]},s.hcg.rgb=function(n){const a=n[0]/360,r=n[1]/100,c=n[2]/100;if(r===0)return[c*255,c*255,c*255];const o=[0,0,0],l=a%1*6,f=l%1,u=1-f;let i=0;switch(Math.floor(l)){case 0:o[0]=1,o[1]=f,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=f;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=f,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return i=(1-r)*c,[(r*o[0]+i)*255,(r*o[1]+i)*255,(r*o[2]+i)*255]},s.hcg.hsv=function(n){const a=n[1]/100,r=n[2]/100,c=a+r*(1-a);let o=0;return c>0&&(o=a/c),[n[0],o*100,c*100]},s.hcg.hsl=function(n){const a=n[1]/100,c=n[2]/100*(1-a)+.5*a;let o=0;return c>0&&c<.5?o=a/(2*c):c>=.5&&c<1&&(o=a/(2*(1-c))),[n[0],o*100,c*100]},s.hcg.hwb=function(n){const a=n[1]/100,r=n[2]/100,c=a+r*(1-a);return[n[0],(c-a)*100,(1-c)*100]},s.hwb.hcg=function(n){const a=n[1]/100,c=1-n[2]/100,o=c-a;let l=0;return o<1&&(l=(c-o)/(1-o)),[n[0],o*100,l*100]},s.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]},s.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]},s.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]},s.gray.hsl=function(n){return[0,0,n[0]]},s.gray.hsv=s.gray.hsl,s.gray.hwb=function(n){return[0,100,n[0]]},s.gray.cmyk=function(n){return[0,0,0,n[0]]},s.gray.lab=function(n){return[n[0],0,0]},s.gray.hex=function(n){const a=Math.round(n[0]/100*255)&255,c=((a<<16)+(a<<8)+a).toString(16).toUpperCase();return"000000".substring(c.length)+c},s.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]},oe}var ce,Ee;function yn(){if(Ee)return ce;Ee=1;const e=pt();function t(){const a={},r=Object.keys(e);for(let c=r.length,o=0;o<c;o++)a[r[o]]={distance:-1,parent:null};return a}function s(a){const r=t(),c=[a];for(r[a].distance=0;c.length;){const o=c.pop(),l=Object.keys(e[o]);for(let f=l.length,u=0;u<f;u++){const i=l[u],d=r[i];d.distance===-1&&(d.distance=r[o].distance+1,d.parent=o,c.unshift(i))}}return r}function b(a,r){return function(c){return r(a(c))}}function n(a,r){const c=[r[a].parent,a];let o=e[r[a].parent][a],l=r[a].parent;for(;r[l].parent;)c.unshift(r[l].parent),o=b(e[r[l].parent][l],o),l=r[l].parent;return o.conversion=c,o}return ce=function(a){const r=s(a),c={},o=Object.keys(r);for(let l=o.length,f=0;f<l;f++){const u=o[f];r[u].parent!==null&&(c[u]=n(u,r))}return c},ce}var ie,je;function vn(){if(je)return ie;je=1;const e=pt(),t=yn(),s={},b=Object.keys(e);function n(r){const c=function(...o){const l=o[0];return l==null?l:(l.length>1&&(o=l),r(o))};return"conversion"in r&&(c.conversion=r.conversion),c}function a(r){const c=function(...o){const l=o[0];if(l==null)return l;l.length>1&&(o=l);const f=r(o);if(typeof f=="object")for(let u=f.length,i=0;i<u;i++)f[i]=Math.round(f[i]);return f};return"conversion"in r&&(c.conversion=r.conversion),c}return b.forEach(r=>{s[r]={},Object.defineProperty(s[r],"channels",{value:e[r].channels}),Object.defineProperty(s[r],"labels",{value:e[r].labels});const c=t(r);Object.keys(c).forEach(l=>{const f=c[l];s[r][l]=a(f),s[r][l].raw=n(f)})}),ie=s,ie}var le,Re;function xn(){if(Re)return le;Re=1;const e=en(),t=vn(),s=["keyword","gray","hex"],b={};for(const i of Object.keys(t))b[[...t[i].labels].sort().join("")]=i;const n={};function a(i,d){if(!(this instanceof a))return new a(i,d);if(d&&d in s&&(d=null),d&&!(d in t))throw new Error("Unknown model: "+d);let p,g;if(i==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(i instanceof a)this.model=i.model,this.color=[...i.color],this.valpha=i.valpha;else if(typeof i=="string"){const m=e.get(i);if(m===null)throw new Error("Unable to parse color from string: "+i);this.model=m.model,g=t[this.model].channels,this.color=m.value.slice(0,g),this.valpha=typeof m.value[g]=="number"?m.value[g]:1}else if(i.length>0){this.model=d||"rgb",g=t[this.model].channels;const m=Array.prototype.slice.call(i,0,g);this.color=u(m,g),this.valpha=typeof i[g]=="number"?i[g]:1}else if(typeof i=="number")this.model="rgb",this.color=[i>>16&255,i>>8&255,i&255],this.valpha=1;else{this.valpha=1;const m=Object.keys(i);"alpha"in i&&(m.splice(m.indexOf("alpha"),1),this.valpha=typeof i.alpha=="number"?i.alpha:0);const y=m.sort().join("");if(!(y in b))throw new Error("Unable to parse color from object: "+JSON.stringify(i));this.model=b[y];const{labels:v}=t[this.model],C=[];for(p=0;p<v.length;p++)C.push(i[v[p]]);this.color=u(C)}if(n[this.model])for(g=t[this.model].channels,p=0;p<g;p++){const m=n[this.model][p];m&&(this.color[p]=m(this.color[p]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}a.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(i){let d=this.model in e.to?this:this.rgb();d=d.round(typeof i=="number"?i:1);const p=d.valpha===1?d.color:[...d.color,this.valpha];return e.to[d.model](p)},percentString(i){const d=this.rgb().round(typeof i=="number"?i:1),p=d.valpha===1?d.color:[...d.color,this.valpha];return e.to.rgb.percent(p)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const i={},{channels:d}=t[this.model],{labels:p}=t[this.model];for(let g=0;g<d;g++)i[p[g]]=this.color[g];return this.valpha!==1&&(i.alpha=this.valpha),i},unitArray(){const i=this.rgb().color;return i[0]/=255,i[1]/=255,i[2]/=255,this.valpha!==1&&i.push(this.valpha),i},unitObject(){const i=this.rgb().object();return i.r/=255,i.g/=255,i.b/=255,this.valpha!==1&&(i.alpha=this.valpha),i},round(i){return i=Math.max(i||0,0),new a([...this.color.map(c(i)),this.valpha],this.model)},alpha(i){return i!==void 0?new a([...this.color,Math.max(0,Math.min(1,i))],this.model):this.valpha},red:o("rgb",0,l(255)),green:o("rgb",1,l(255)),blue:o("rgb",2,l(255)),hue:o(["hsl","hsv","hsl","hwb","hcg"],0,i=>(i%360+360)%360),saturationl:o("hsl",1,l(100)),lightness:o("hsl",2,l(100)),saturationv:o("hsv",1,l(100)),value:o("hsv",2,l(100)),chroma:o("hcg",1,l(100)),gray:o("hcg",2,l(100)),white:o("hwb",1,l(100)),wblack:o("hwb",2,l(100)),cyan:o("cmyk",0,l(100)),magenta:o("cmyk",1,l(100)),yellow:o("cmyk",2,l(100)),black:o("cmyk",3,l(100)),x:o("xyz",0,l(95.047)),y:o("xyz",1,l(100)),z:o("xyz",2,l(108.833)),l:o("lab",0,l(100)),a:o("lab",1),b:o("lab",2),keyword(i){return i!==void 0?new a(i):t[this.model].keyword(this.color)},hex(i){return i!==void 0?new a(i):e.to.hex(this.rgb().round().color)},hexa(i){if(i!==void 0)return new a(i);const d=this.rgb().round().color;let p=Math.round(this.valpha*255).toString(16).toUpperCase();return p.length===1&&(p="0"+p),e.to.hex(d)+p},rgbNumber(){const i=this.rgb().color;return(i[0]&255)<<16|(i[1]&255)<<8|i[2]&255},luminosity(){const i=this.rgb().color,d=[];for(const[p,g]of i.entries()){const m=g/255;d[p]=m<=.04045?m/12.92:((m+.055)/1.055)**2.4}return .2126*d[0]+.7152*d[1]+.0722*d[2]},contrast(i){const d=this.luminosity(),p=i.luminosity();return d>p?(d+.05)/(p+.05):(p+.05)/(d+.05)},level(i){const d=this.contrast(i);return d>=7?"AAA":d>=4.5?"AA":""},isDark(){const i=this.rgb().color;return(i[0]*2126+i[1]*7152+i[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const i=this.rgb();for(let d=0;d<3;d++)i.color[d]=255-i.color[d];return i},lighten(i){const d=this.hsl();return d.color[2]+=d.color[2]*i,d},darken(i){const d=this.hsl();return d.color[2]-=d.color[2]*i,d},saturate(i){const d=this.hsl();return d.color[1]+=d.color[1]*i,d},desaturate(i){const d=this.hsl();return d.color[1]-=d.color[1]*i,d},whiten(i){const d=this.hwb();return d.color[1]+=d.color[1]*i,d},blacken(i){const d=this.hwb();return d.color[2]+=d.color[2]*i,d},grayscale(){const i=this.rgb().color,d=i[0]*.3+i[1]*.59+i[2]*.11;return a.rgb(d,d,d)},fade(i){return this.alpha(this.valpha-this.valpha*i)},opaquer(i){return this.alpha(this.valpha+this.valpha*i)},rotate(i){const d=this.hsl();let p=d.color[0];return p=(p+i)%360,p=p<0?360+p:p,d.color[0]=p,d},mix(i,d){if(!i||!i.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof i);const p=i.rgb(),g=this.rgb(),m=d===void 0?.5:d,y=2*m-1,v=p.alpha()-g.alpha(),C=((y*v===-1?y:(y+v)/(1+y*v))+1)/2,R=1-C;return a.rgb(C*p.red()+R*g.red(),C*p.green()+R*g.green(),C*p.blue()+R*g.blue(),p.alpha()*m+g.alpha()*(1-m))}};for(const i of Object.keys(t)){if(s.includes(i))continue;const{channels:d}=t[i];a.prototype[i]=function(...p){return this.model===i?new a(this):p.length>0?new a(p,i):new a([...f(t[this.model][i].raw(this.color)),this.valpha],i)},a[i]=function(...p){let g=p[0];return typeof g=="number"&&(g=u(p,d)),new a(g,i)}}function r(i,d){return Number(i.toFixed(d))}function c(i){return function(d){return r(d,i)}}function o(i,d,p){i=Array.isArray(i)?i:[i];for(const g of i)(n[g]||(n[g]=[]))[d]=p;return i=i[0],function(g){let m;return g!==void 0?(p&&(g=p(g)),m=this[i](),m.color[d]=g,m):(m=this[i]().color[d],p&&(m=p(m)),m)}}function l(i){return function(d){return Math.max(0,Math.min(i,d))}}function f(i){return Array.isArray(i)?i:[i]}function u(i,d){for(let p=0;p<d;p++)typeof i[p]!="number"&&(i[p]=0);return i}return le=a,le}var wn=xn();const Oe=Pt(wn);var Cn=typeof global=="object"&&global&&global.Object===Object&&global,An=typeof self=="object"&&self&&self.Object===Object&&self,B=Cn||An||Function("return this")(),ee=B.Symbol,gt=Object.prototype,Fn=gt.hasOwnProperty,_n=gt.toString,W=ee?ee.toStringTag:void 0;function En(e){var t=Fn.call(e,W),s=e[W];try{e[W]=void 0;var b=!0}catch{}var n=_n.call(e);return b&&(t?e[W]=s:delete e[W]),n}var jn=Object.prototype,Rn=jn.toString;function On(e){return Rn.call(e)}var Sn="[object Null]",kn="[object Undefined]",Se=ee?ee.toStringTag:void 0;function mt(e){return e==null?e===void 0?kn:Sn:Se&&Se in Object(e)?En(e):On(e)}function yt(e){return e!=null&&typeof e=="object"}var Dn="[object Symbol]";function In(e){return typeof e=="symbol"||yt(e)&&mt(e)==Dn}var Tn=Array.isArray,Ln=/\s/;function Nn(e){for(var t=e.length;t--&&Ln.test(e.charAt(t)););return t}var Bn=/^\s+/;function $n(e){return e&&e.slice(0,Nn(e)+1).replace(Bn,"")}function z(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ke=NaN,Mn=/^[-+]0x[0-9a-f]+$/i,Pn=/^0b[01]+$/i,zn=/^0o[0-7]+$/i,Un=parseInt;function Gn(e){if(typeof e=="number")return e;if(In(e))return ke;if(z(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=z(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=$n(e);var s=Pn.test(e);return s||zn.test(e)?Un(e.slice(2),s?2:8):Mn.test(e)?ke:+e}var De=1/0,Wn=17976931348623157e292;function qn(e){if(!e)return e===0?e:0;if(e=Gn(e),e===De||e===-De){var t=e<0?-1:1;return t*Wn}return e===e?e:0}function Ie(e){var t=qn(e),s=t%1;return t===t?s?t-s:t:0}function vt(e){return e}var Hn="[object AsyncFunction]",Yn="[object Function]",Kn="[object GeneratorFunction]",Jn="[object Proxy]";function Vn(e){if(!z(e))return!1;var t=mt(e);return t==Yn||t==Kn||t==Hn||t==Jn}var be=B["__core-js_shared__"],Te=(function(){var e=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Xn(e){return!!Te&&Te in e}var Zn=Function.prototype,Qn=Zn.toString;function es(e){if(e!=null){try{return Qn.call(e)}catch{}try{return e+""}catch{}}return""}var ts=/[\\^$.*+?()[\]{}|]/g,ns=/^\[object .+?Constructor\]$/,ss=Function.prototype,as=Object.prototype,rs=ss.toString,os=as.hasOwnProperty,cs=RegExp("^"+rs.call(os).replace(ts,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function is(e){if(!z(e)||Xn(e))return!1;var t=Vn(e)?cs:ns;return t.test(es(e))}function ls(e,t){return e==null?void 0:e[t]}function xt(e,t){var s=ls(e,t);return is(s)?s:void 0}var Le=xt(B,"WeakMap"),te=Le&&new Le,wt=te?function(e,t){return te.set(e,t),e}:vt,Ne=Object.create,me=(function(){function e(){}return function(t){if(!z(t))return{};if(Ne)return Ne(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}})();function Y(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var s=me(e.prototype),b=e.apply(s,t);return z(b)?b:s}}var bs=1;function fs(e,t,s){var b=t&bs,n=Y(e);function a(){var r=this&&this!==B&&this instanceof a?n:e;return r.apply(b?s:this,arguments)}return a}function Ct(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}var ds=Math.max;function At(e,t,s,b){for(var n=-1,a=e.length,r=s.length,c=-1,o=t.length,l=ds(a-r,0),f=Array(o+l),u=!b;++c<o;)f[c]=t[c];for(;++n<r;)(u||n<a)&&(f[s[n]]=e[n]);for(;l--;)f[c++]=e[n++];return f}var us=Math.max;function Ft(e,t,s,b){for(var n=-1,a=e.length,r=-1,c=s.length,o=-1,l=t.length,f=us(a-c,0),u=Array(f+l),i=!b;++n<f;)u[n]=e[n];for(var d=n;++o<l;)u[d+o]=t[o];for(;++r<c;)(i||n<a)&&(u[d+s[r]]=e[n++]);return u}function hs(e,t){for(var s=e.length,b=0;s--;)e[s]===t&&++b;return b}function ye(){}var ps=4294967295;function U(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ps,this.__views__=[]}U.prototype=me(ye.prototype);U.prototype.constructor=U;function gs(){}var _t=te?function(e){return te.get(e)}:gs,Be={},ms=Object.prototype,ys=ms.hasOwnProperty;function vs(e){for(var t=e.name+"",s=Be[t],b=ys.call(Be,t)?s.length:0;b--;){var n=s[b],a=n.func;if(a==null||a==e)return n.name}return t}function G(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}G.prototype=me(ye.prototype);G.prototype.constructor=G;function Et(e,t){var s=-1,b=e.length;for(t||(t=Array(b));++s<b;)t[s]=e[s];return t}function xs(e){if(e instanceof U)return e.clone();var t=new G(e.__wrapped__,e.__chain__);return t.__actions__=Et(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ws=Object.prototype,Cs=ws.hasOwnProperty;function ne(e){if(yt(e)&&!Tn(e)&&!(e instanceof U)){if(e instanceof G)return e;if(Cs.call(e,"__wrapped__"))return xs(e)}return new G(e)}ne.prototype=ye.prototype;ne.prototype.constructor=ne;function As(e){var t=vs(e),s=ne[t];if(typeof s!="function"||!(t in U.prototype))return!1;if(e===s)return!0;var b=_t(s);return!!b&&e===b[0]}var Fs=800,_s=16,Es=Date.now;function jt(e){var t=0,s=0;return function(){var b=Es(),n=_s-(b-s);if(s=b,n>0){if(++t>=Fs)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Rt=jt(wt),js=/\{\n\/\* \[wrapped with (.+)\] \*/,Rs=/,? & /;function Os(e){var t=e.match(js);return t?t[1].split(Rs):[]}var Ss=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function ks(e,t){var s=t.length;if(!s)return e;var b=s-1;return t[b]=(s>1?"& ":"")+t[b],t=t.join(s>2?", ":" "),e.replace(Ss,`{
/* [wrapped with `+t+`] */
`)}function Ds(e){return function(){return e}}var $e=(function(){try{var e=xt(Object,"defineProperty");return e({},"",{}),e}catch{}})(),Is=$e?function(e,t){return $e(e,"toString",{configurable:!0,enumerable:!1,value:Ds(t),writable:!0})}:vt,Ts=jt(Is);function Ls(e,t){for(var s=-1,b=e==null?0:e.length;++s<b&&t(e[s],s,e)!==!1;);return e}function Ns(e,t,s,b){for(var n=e.length,a=s+-1;++a<n;)if(t(e[a],a,e))return a;return-1}function Bs(e){return e!==e}function $s(e,t,s){for(var b=s-1,n=e.length;++b<n;)if(e[b]===t)return b;return-1}function Ms(e,t,s){return t===t?$s(e,t,s):Ns(e,Bs,s)}function Ps(e,t){var s=e==null?0:e.length;return!!s&&Ms(e,t,0)>-1}var zs=1,Us=2,Gs=8,Ws=16,qs=32,Hs=64,Ys=128,Ks=256,Js=512,Vs=[["ary",Ys],["bind",zs],["bindKey",Us],["curry",Gs],["curryRight",Ws],["flip",Js],["partial",qs],["partialRight",Hs],["rearg",Ks]];function Xs(e,t){return Ls(Vs,function(s){var b="_."+s[0];t&s[1]&&!Ps(e,b)&&e.push(b)}),e.sort()}function Ot(e,t,s){var b=t+"";return Ts(e,ks(b,Xs(Os(b),s)))}var Zs=4,Qs=8,Me=32,Pe=64;function St(e,t,s,b,n,a,r,c,o,l){var f=t&Qs,u=f?r:void 0,i=f?void 0:r,d=f?a:void 0,p=f?void 0:a;t|=f?Me:Pe,t&=~(f?Pe:Me),t&Zs||(t&=-4);var g=[e,t,n,d,u,p,i,c,o,l],m=s.apply(void 0,g);return As(e)&&Rt(m,g),m.placeholder=b,Ot(m,e,t)}function kt(e){var t=e;return t.placeholder}var ea=9007199254740991,ta=/^(?:0|[1-9]\d*)$/;function na(e,t){var s=typeof e;return t=t??ea,!!t&&(s=="number"||s!="symbol"&&ta.test(e))&&e>-1&&e%1==0&&e<t}var sa=Math.min;function aa(e,t){for(var s=e.length,b=sa(t.length,s),n=Et(e);b--;){var a=t[b];e[b]=na(a,s)?n[a]:void 0}return e}var ze="__lodash_placeholder__";function se(e,t){for(var s=-1,b=e.length,n=0,a=[];++s<b;){var r=e[s];(r===t||r===ze)&&(e[s]=ze,a[n++]=s)}return a}var ra=1,oa=2,ca=8,ia=16,la=128,ba=512;function ve(e,t,s,b,n,a,r,c,o,l){var f=t&la,u=t&ra,i=t&oa,d=t&(ca|ia),p=t&ba,g=i?void 0:Y(e);function m(){for(var y=arguments.length,v=Array(y),C=y;C--;)v[C]=arguments[C];if(d)var R=kt(m),I=hs(v,R);if(b&&(v=At(v,b,n,d)),a&&(v=Ft(v,a,r,d)),y-=I,d&&y<l){var j=se(v,R);return St(e,t,ve,m.placeholder,s,v,j,c,o,l-y)}var E=u?s:this,_=i?E[e]:e;return y=v.length,c?v=aa(v,c):p&&y>1&&v.reverse(),f&&o<y&&(v.length=o),this&&this!==B&&this instanceof m&&(_=g||Y(_)),_.apply(E,v)}return m}function fa(e,t,s){var b=Y(e);function n(){for(var a=arguments.length,r=Array(a),c=a,o=kt(n);c--;)r[c]=arguments[c];var l=a<3&&r[0]!==o&&r[a-1]!==o?[]:se(r,o);if(a-=l.length,a<s)return St(e,t,ve,n.placeholder,void 0,r,l,void 0,void 0,s-a);var f=this&&this!==B&&this instanceof n?b:e;return Ct(f,this,r)}return n}var da=1;function ua(e,t,s,b){var n=t&da,a=Y(e);function r(){for(var c=-1,o=arguments.length,l=-1,f=b.length,u=Array(f+o),i=this&&this!==B&&this instanceof r?a:e;++l<f;)u[l]=b[l];for(;o--;)u[l++]=arguments[++c];return Ct(i,n?s:this,u)}return r}var Ue="__lodash_placeholder__",fe=1,ha=2,pa=4,Ge=8,q=128,We=256,ga=Math.min;function ma(e,t){var s=e[1],b=t[1],n=s|b,a=n<(fe|ha|q),r=b==q&&s==Ge||b==q&&s==We&&e[7].length<=t[8]||b==(q|We)&&t[7].length<=t[8]&&s==Ge;if(!(a||r))return e;b&fe&&(e[2]=t[2],n|=s&fe?0:pa);var c=t[3];if(c){var o=e[3];e[3]=o?At(o,c,t[4]):c,e[4]=o?se(e[3],Ue):t[4]}return c=t[5],c&&(o=e[5],e[5]=o?Ft(o,c,t[6]):c,e[6]=o?se(e[5],Ue):t[6]),c=t[7],c&&(e[7]=c),b&q&&(e[8]=e[8]==null?t[8]:ga(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=n,e}var ya="Expected a function",qe=1,va=2,He=8,Ye=16,Ke=32,xa=64,Je=Math.max;function wa(e,t,s,b,n,a,r,c){var o=t&va;if(!o&&typeof e!="function")throw new TypeError(ya);var l=b?b.length:0;if(l||(t&=-97,b=n=void 0),r=r===void 0?r:Je(Ie(r),0),c=c===void 0?c:Ie(c),l-=n?n.length:0,t&xa){var f=b,u=n;b=n=void 0}var i=o?void 0:_t(e),d=[e,t,s,b,n,f,u,a,r,c];if(i&&ma(d,i),e=d[0],t=d[1],s=d[2],b=d[3],n=d[4],c=d[9]=d[9]===void 0?o?0:e.length:Je(d[9]-l,0),!c&&t&(He|Ye)&&(t&=-25),!t||t==qe)var p=fs(e,t,s);else t==He||t==Ye?p=fa(e,t,c):(t==Ke||t==(qe|Ke))&&!n.length?p=ua(e,t,s,b):p=ve.apply(void 0,d);var g=i?wt:Rt;return Ot(g(p,d),e,t)}var Ca=8;function ae(e,t,s){t=s?void 0:t;var b=wa(e,Ca,void 0,void 0,void 0,void 0,void 0,t);return b.placeholder=ae.placeholder,b}ae.placeholder={};function Aa(e){const t=e[0],s=e[1],b=e[2];let n,a,r;return n=t*1+s*0+b*1.13983,a=t*1+s*-.39465+b*-.5806,r=t*1+s*2.02311+b*0,n=Math.min(Math.max(0,n),1),a=Math.min(Math.max(0,a),1),r=Math.min(Math.max(0,r),1),[n*255,a*255,r*255]}function Fa(e){const t=e[0]/255,s=e[1]/255,b=e[2]/255,n=t*.299+s*.587+b*.114,a=t*-.14713+s*-.28886+b*.436,r=t*.615+s*-.51499+b*-.10001;return[n,a,r]}const _a={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},Ea={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},ja={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},Ra={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},Oa={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},Sa={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},ka={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},Da={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},Ia={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},Ta={scheme:"brewer",author:"timothÃ©e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},La={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},Na={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},Ba={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},$a={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},Ma={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},Pa={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},za={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},Ua={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},Ga={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},Wa={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},qa={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},Ha={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},Ya={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},Ka={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},Ja={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},Va={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},Xa={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},Za={scheme:"nicinabox",author:"nicinabox (http://github.com/nicinabox)",base00:"#2A2F3A",base01:"#3C444F",base02:"#4F5A65",base03:"#BEBEBE",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#FFFFFF",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#FC6D24",base0A:"#ddb26f",base0B:"#A1C659",base0C:"#12cfc0",base0D:"#6FB3D2",base0E:"#D381C3",base0F:"#deaf8f"},Qa={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},er={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},tr={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},nr={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},sr={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},ar={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},rr={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},or={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},cr={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},ir={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},Dt={threezerotwofour:_a,apathy:Ea,ashes:ja,atelierDune:Ra,atelierForest:Oa,atelierHeath:Sa,atelierLakeside:ka,atelierSeaside:Da,bespin:Ia,brewer:Ta,bright:La,chalk:Na,codeschool:Ba,colors:$a,default:Ma,eighties:Pa,embers:za,flat:Ua,google:Ga,grayscale:Wa,greenscreen:qa,harmonic:Ha,hopscotch:Ya,isotope:Ka,marrakesh:Ja,mocha:Va,monokai:Xa,nicinabox:Za,ocean:Qa,paraiso:er,pop:tr,railscasts:nr,shapeshifter:sr,solarized:ar,summerfruit:rr,tomorrow:or,tube:cr,twilight:ir},It=Dt.default,Ve=Object.keys(It),lr=e=>e<.25?1:e<.5?.9-e:1.1-e,br=e=>{const t=Oe(e),[s,b,n]=Fa(t.array()),a=[lr(s),b,n],r=Aa(a);return Oe.rgb(r).hex()},M=e=>t=>({className:[t.className,e.className].filter(Boolean).join(" "),style:{...t.style||{},...e.style||{}}}),fr=(e,t)=>{if(e===void 0)return t;if(t===void 0)return e;const s=typeof e,b=typeof t;switch(s){case"string":switch(b){case"string":return[t,e].filter(Boolean).join(" ");case"object":return M({className:e,style:t});case"function":return(n,...a)=>M({className:e})(t(n,...a))}break;case"object":switch(b){case"string":return M({className:t,style:e});case"object":return{...t,...e};case"function":return(n,...a)=>M({style:e})(t(n,...a))}break;case"function":switch(b){case"string":return(n,...a)=>e(M(n)({className:t}),...a);case"object":return(n,...a)=>e(M(n)({style:t}),...a);case"function":return(n,...a)=>e(t(n,...a),...a)}}},dr=(e,t)=>{const s=Object.keys(t);for(const b in e)s.indexOf(b)===-1&&s.push(b);return s.reduce((b,n)=>(b[n]=fr(e[n],t[n]),b),{})},ur=(e,t,...s)=>{if(t===null)return e;Array.isArray(t)||(t=[t]);const n=t.map(a=>e[a]).filter(Boolean).reduce((a,r)=>(typeof r=="string"?a.className=[a.className,r].filter(Boolean).join(" "):typeof r=="object"?a.style={...a.style,...r}:typeof r=="function"&&(a={...a,...r(a,...s)}),a),{className:"",style:{}});return n.className||delete n.className,Object.keys(n.style).length===0&&delete n.style,n},he=e=>Object.keys(e).reduce((t,s)=>(t[s]=/^base/.test(s)?br(e[s]):s==="scheme"?e[s]+":inverted":e[s],t),{}),hr=ae((e,t={},s={},...b)=>{const{defaultBase16:n=It,base16Themes:a=null}=t,r=pr(s,a);r&&(s={...r,...s});const c=Ve.reduce((u,i)=>(u[i]=s[i]||n[i],u),{}),o=Object.keys(s).reduce((u,i)=>(Ve.indexOf(i)===-1&&(u[i]=s[i]),u),{}),l=e(c),f=dr(o,l);return ae(ur,2)(f,...b)},3),Tt=e=>!!e.extend,pr=(e,t)=>{if(e&&Tt(e)&&e.extend&&(e=e.extend),typeof e=="string"){const[s,b]=e.split(":");t?e=t[s]:e=Dt[s],b==="inverted"&&(e=he(e))}return e&&Object.prototype.hasOwnProperty.call(e,"base00")?e:void 0},gr=e=>typeof e=="string"?`${e}:inverted`:e&&Tt(e)&&e.extend?typeof e.extend=="string"?{...e,extend:`${e.extend}:inverted`}:{...e,extend:he(e.extend)}:e&&he(e);function mr(e){const t=Object.prototype.toString.call(e).slice(8,-1);return t==="Object"&&typeof e[Symbol.iterator]=="function"?"Iterable":t==="Custom"&&e.constructor!==Object&&e instanceof Object?"Object":t}function Lt({styling:e,arrowStyle:t="single",expanded:s,nodeType:b,onClick:n}){return w.createElement("div",{...e("arrowContainer",t),onClick:n},w.createElement("div",{...e(["arrow","arrowSign"],b,s,t)},"â¶",t==="double"&&w.createElement("div",{...e(["arrowSign","arrowSignInner"])},"â¶")))}function yr(e,t){return e==="Object"?Object.keys(t).length:e==="Array"?t.length:1/0}function vr(e){return typeof e.set=="function"}function xr(e,t,s,b=0,n=1/0){let a;if(e==="Object"){let r=Object.getOwnPropertyNames(t);s&&r.sort(s===!0?void 0:s),r=r.slice(b,n+1),a={entries:r.map(c=>({key:c,value:t[c]}))}}else if(e==="Array")a={entries:t.slice(b,n+1).map((r,c)=>({key:c+b,value:r}))};else{let r=0;const c=[];let o=!0;const l=vr(t);for(const f of t){if(r>n){o=!1;break}b<=r&&(l&&Array.isArray(f)?typeof f[0]=="string"||typeof f[0]=="number"?c.push({key:f[0],value:f[1]}):c.push({key:`[entry ${r}]`,value:{"[key]":f[0],"[value]":f[1]}}):c.push({key:r,value:f})),r++}a={hasMore:!o,entries:c}}return a}function de(e,t,s){const b=[];for(;t-e>s*s;)s=s*s;for(let n=e;n<=t;n+=s)b.push({from:n,to:Math.min(t,n+s-1)});return b}function wr(e,t,s,b,n=0,a=1/0){const r=xr.bind(null,e,t,s);if(!b)return r().entries;const c=a<1/0,o=Math.min(a-n,yr(e,t));if(e!=="Iterable"){if(o<=b||b<7)return r(n,a).entries}else if(o<=b&&!c)return r(n,a).entries;let l;if(e==="Iterable"){const{hasMore:f,entries:u}=r(n,n+b-1);l=f?[...u,...de(n+b,n+2*b-1,b)]:u}else l=c?de(n,a,b):[...r(0,b-5).entries,...de(b-4,o-5,b),...r(o-4,o-1).entries];return l}function Cr(e){const{styling:t,from:s,to:b,renderChildNodes:n,nodeType:a}=e,[r,c]=x.useState(!1),o=x.useCallback(()=>{c(!r)},[r]);return r?w.createElement("div",{...t("itemRange",r)},n(e,s,b)):w.createElement("div",{...t("itemRange",r),onClick:o},w.createElement(Lt,{nodeType:a,styling:t,expanded:!1,onClick:o,arrowStyle:"double"}),`${s} ... ${b}`)}function Ar(e){return e.to!==void 0}function Nt(e,t,s){const{nodeType:b,data:n,collectionLimit:a,circularCache:r,keyPath:c,postprocessValue:o,sortObjectKeys:l}=e,f=[];return wr(b,n,l,a,t,s).forEach(u=>{if(Ar(u))f.push(w.createElement(Cr,{...e,key:`ItemRange--${u.from}-${u.to}`,from:u.from,to:u.to,renderChildNodes:Nt}));else{const{key:i,value:d}=u,p=r.includes(d);f.push(w.createElement(Bt,{...e,postprocessValue:o,collectionLimit:a,key:`Node--${i}`,keyPath:[i,...c],value:o(d),circularCache:[...r,d],isCircular:p,hideRoot:!1}))}}),f}function xe(e){const{circularCache:t=[],collectionLimit:s,createItemString:b,data:n,expandable:a,getItemString:r,hideRoot:c,isCircular:o,keyPath:l,labelRenderer:f,level:u=0,nodeType:i,nodeTypeIndicator:d,shouldExpandNodeInitially:p,styling:g}=e,[m,y]=x.useState(o?!1:p(l,n,u)),v=x.useCallback(()=>{a&&y(!m)},[a,m]),C=m||c&&u===0?Nt({...e,circularCache:t,level:u+1}):null,R=w.createElement("span",{...g("nestedNodeItemType",m)},d),I=r(i,n,R,b(n,s),l),j=[l,i,m,a];return c?w.createElement("li",{...g("rootNode",...j)},w.createElement("ul",{...g("rootNodeChildren",...j)},C)):w.createElement("li",{...g("nestedNode",...j)},a&&w.createElement(Lt,{styling:g,nodeType:i,expanded:m,onClick:v}),w.createElement("label",{...g(["label","nestedNodeLabel"],...j),onClick:v},f(...j)),w.createElement("span",{...g("nestedNodeItemString",...j),onClick:v},I),w.createElement("ul",{...g("nestedNodeChildren",...j)},C))}function Fr(e){const t=Object.getOwnPropertyNames(e).length;return`${t} ${t!==1?"keys":"key"}`}function _r({data:e,...t}){return w.createElement(xe,{...t,data:e,nodeType:"Object",nodeTypeIndicator:t.nodeType==="Error"?"Error()":"{}",createItemString:Fr,expandable:Object.getOwnPropertyNames(e).length>0})}function Er(e){return`${e.length} ${e.length!==1?"items":"item"}`}function jr({data:e,...t}){return w.createElement(xe,{...t,data:e,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:Er,expandable:e.length>0})}function Rr(e,t){let s=0,b=!1;if(Number.isSafeInteger(e.size))s=e.size;else for(const n of e){if(t&&s+1>t){b=!0;break}s+=1}return`${b?">":""}${s} ${s!==1?"entries":"entry"}`}function Or(e){return w.createElement(xe,{...e,nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:Rr,expandable:!0})}function T({nodeType:e,styling:t,labelRenderer:s,keyPath:b,valueRenderer:n,value:a,valueGetter:r=c=>c}){return w.createElement("li",{...t("value",e,b)},w.createElement("label",{...t(["label","valueLabel"],e,b)},s(b,e,!1,!1)),w.createElement("span",{...t("valueText",e,b)},n(r(a),a,...b)))}function Bt({getItemString:e,keyPath:t,labelRenderer:s,styling:b,value:n,valueRenderer:a,isCustomNode:r,...c}){const o=r(n)?"Custom":mr(n),l={getItemString:e,key:t[0],keyPath:t,labelRenderer:s,nodeType:o,styling:b,value:n,valueRenderer:a},f={...c,...l,data:n,isCustomNode:r};switch(o){case"Object":case"Error":case"WeakMap":case"WeakSet":return w.createElement(_r,{...f});case"Array":return w.createElement(jr,{...f});case"Iterable":case"Map":case"Set":return w.createElement(Or,{...f});case"String":return w.createElement(T,{...l,valueGetter:u=>`"${u}"`});case"Number":return w.createElement(T,{...l});case"Boolean":return w.createElement(T,{...l,valueGetter:u=>u?"true":"false"});case"Date":return w.createElement(T,{...l,valueGetter:u=>u.toISOString()});case"Null":return w.createElement(T,{...l,valueGetter:()=>"null"});case"Undefined":return w.createElement(T,{...l,valueGetter:()=>"undefined"});case"Function":case"Symbol":return w.createElement(T,{...l,valueGetter:u=>u.toString()});case"Custom":return w.createElement(T,{...l});default:return w.createElement(T,{...l,valueGetter:()=>`<${o}>`})}}const Sr={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},kr=e=>({BACKGROUND_COLOR:e.base00,TEXT_COLOR:e.base07,STRING_COLOR:e.base0B,DATE_COLOR:e.base0B,NUMBER_COLOR:e.base09,BOOLEAN_COLOR:e.base09,NULL_COLOR:e.base08,UNDEFINED_COLOR:e.base08,FUNCTION_COLOR:e.base08,SYMBOL_COLOR:e.base08,LABEL_COLOR:e.base0D,ARROW_COLOR:e.base0D,ITEM_STRING_COLOR:e.base0B,ITEM_STRING_EXPANDED_COLOR:e.base03}),Dr=e=>({String:e.STRING_COLOR,Date:e.DATE_COLOR,Number:e.NUMBER_COLOR,Boolean:e.BOOLEAN_COLOR,Null:e.NULL_COLOR,Undefined:e.UNDEFINED_COLOR,Function:e.FUNCTION_COLOR,Symbol:e.SYMBOL_COLOR}),Ir=e=>{const t=kr(e);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:t.BACKGROUND_COLOR},value:({style:s},b,n)=>({style:{...s,paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:n.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"}}),label:{display:"inline-block",color:t.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:({style:s},b)=>({style:{...s,color:Dr(t)[b]}}),itemRange:(s,b)=>({style:{paddingTop:b?0:"0.25em",cursor:"pointer",color:t.LABEL_COLOR}}),arrow:({style:s},b,n)=>({style:{...s,marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",transform:n?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"}}),arrowContainer:({style:s},b)=>({style:{...s,display:"inline-block",paddingRight:"0.5em",paddingLeft:b==="double"?"1em":0,cursor:"pointer"}}),arrowSign:{color:t.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:({style:s},b,n,a,r)=>({style:{...s,position:"relative",paddingTop:"0.25em",marginLeft:b.length>1?"0.875em":0,paddingLeft:r?0:"1.125em"}}),rootNode:{padding:0,margin:0},nestedNodeLabel:({style:s},b,n,a,r)=>({style:{...s,margin:0,padding:0,WebkitUserSelect:r?"inherit":"text",MozUserSelect:r?"inherit":"text",cursor:r?"pointer":"default"}}),nestedNodeItemString:({style:s},b,n,a)=>({style:{...s,paddingLeft:"0.5em",cursor:"default",color:a?t.ITEM_STRING_EXPANDED_COLOR:t.ITEM_STRING_COLOR}}),nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:({style:s},b,n)=>({style:{...s,padding:0,margin:0,listStyle:"none",display:n?"block":"none"}}),rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}},Tr=hr(Ir,{defaultBase16:Sr}),Xe=e=>e,Lr=(e,t,s)=>s===0,Nr=(e,t,s,b)=>w.createElement("span",null,s," ",b),Br=([e])=>w.createElement("span",null,e,":"),$r=()=>!1;function Mr({data:e,theme:t,invertTheme:s,keyPath:b=["root"],labelRenderer:n=Br,valueRenderer:a=Xe,shouldExpandNodeInitially:r=Lr,hideRoot:c=!1,getItemString:o=Nr,postprocessValue:l=Xe,isCustomNode:f=$r,collectionLimit:u=50,sortObjectKeys:i=!1}){const d=x.useMemo(()=>Tr(s?gr(t):t),[t,s]);return w.createElement("ul",{...d("tree")},w.createElement(Bt,{keyPath:c?[]:b,value:l(e),isCustomNode:f,styling:d,labelRenderer:n,valueRenderer:a,shouldExpandNodeInitially:r,hideRoot:c,getItemString:o,postprocessValue:l,collectionLimit:u,sortObjectKeys:i}))}const{Text:Ze}=re,$t=x.memo(({file:e,visible:t,onClose:s})=>{const[b,n]=x.useState(null),[a,r]=x.useState(!1),[c,o]=x.useState(null),[l,f]=x.useState(""),u=x.useCallback(async m=>{const C=m.content.split(`
`).slice(0,11).map(_=>_.split(","));if(C.length===0){o("Empty CSV file");return}const R=C[0],I=C.slice(1,11).filter(_=>_.some(S=>S.trim())),j=R.map((_,S)=>({title:_.trim(),dataIndex:`col${S}`,key:`col${S}`,ellipsis:!0})),E=I.map((_,S)=>{const k={key:String(S)};return _.forEach((A,O)=>{k[`col${O}`]=A.trim()}),k});n({type:"table",data:{columns:j,dataSource:E}})},[]),i=x.useCallback(async m=>{const y=m.content,v=JSON.parse(y),C=Array.isArray(v)?v.slice(0,10):v;n({type:"json",data:C})},[]),d=x.useCallback(async(m,y)=>{const v=tn(m.content,{type:"array"}),C=v.SheetNames;if(C.length===0){o("No sheets found in Excel file");return}const R=y||C[0];l||f(R);const I=v.Sheets[R],j=nn.sheet_to_json(I,{header:1});if(j.length===0){o("Empty Excel sheet");return}const E=j[0],_=j.slice(1,11),S=E.map((A,O)=>({title:String(A||`Column ${O+1}`),dataIndex:`col${O}`,key:`col${O}`,ellipsis:!0})),k=_.map((A,O)=>{const we={key:String(O)};return A.forEach((Ce,Mt)=>{we[`col${Mt}`]=Ce!==void 0?String(Ce):""}),we});n({type:"table",data:{columns:S,dataSource:k},sheets:C})},[l]);x.useEffect(()=>{if(!e||!t){n(null),o(null),f("");return}(async()=>{r(!0),o(null);try{switch(e.fileType){case"csv":await u(e);break;case"json":await i(e);break;case"xlsx":await d(e);break;case"parquet":n({type:"info",data:"Parquet files require DuckDB to read. Navigate to the Parquet/SQL page to query this file."});break}}catch(y){console.error("Preview error:",y),o("Failed to load file preview")}finally{r(!1)}})()},[e,t,u,i,d]);const p=m=>{e&&e.fileType==="xlsx"&&(f(m),d(e,m))},g=()=>{if(a)return h.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:h.jsx(zt,{size:"large"})});if(c)return h.jsx(Fe,{type:"error",message:c,showIcon:!0});if(!b)return null;if(b.type==="info")return h.jsx(Fe,{type:"info",message:b.data,showIcon:!0});if(b.type==="json")return h.jsxs("div",{style:{maxHeight:400,overflow:"auto"},children:[h.jsx(Mr,{data:b.data,theme:{base00:"#ffffff",base0B:"#237804",base0D:"#1890ff",base09:"#cf1322"},invertTheme:!1,hideRoot:!0}),Array.isArray(b.data)&&b.data.length>=10&&h.jsx(Ze,{type:"secondary",style:{display:"block",marginTop:16},children:"Showing first 10 items"})]});if(b.type==="table"){const m=h.jsxs(h.Fragment,{children:[h.jsx(nt,{...b.data,size:"small",pagination:!1,scroll:{x:!0}}),h.jsx(Ze,{type:"secondary",style:{display:"block",marginTop:16},children:"Showing first 10 rows"})]});if(b.sheets&&b.sheets.length>1){const y=b.sheets.map(v=>({key:v,label:v,children:m}));return h.jsx(Ht,{activeKey:l,items:y,onChange:p})}return m}return null};return h.jsx(pe,{title:`Preview: ${(e==null?void 0:e.name)||""}`,open:t,onCancel:s,footer:null,width:800,children:g()})});$t.displayName="FilePreviewModal";const{Title:Pr,Text:Qe}=re,zr=x.memo(()=>{const{files:e,deleteFile:t}=tt(),{usages:s,loading:b,refresh:n}=mn(),[a,r]=x.useState(""),[c,o]=x.useState("all"),[l,f]=x.useState("uploadedAt-desc"),[u,i]=x.useState([]),[d,p]=x.useState(null),[g,m]=x.useState(!1),y=()=>{n()},v=x.useMemo(()=>{let E=[...e];if(a){const k=a.toLowerCase();E=E.filter(A=>A.name.toLowerCase().includes(k))}c!=="all"&&(E=E.filter(k=>k.fileType===c));const[_,S]=l.split("-");return E.sort((k,A)=>{let O=0;return _==="name"?O=k.name.localeCompare(A.name):_==="size"?O=k.size-A.size:_==="uploadedAt"&&(O=new Date(k.uploadedAt).getTime()-new Date(A.uploadedAt).getTime()),S==="asc"?O:-O}),E},[e,a,c,l]),C=()=>{r(""),o("all"),f("uploadedAt-desc")},R=E=>{p(E),m(!0)},I=async()=>{if(u.length===0){F.warning("Please select files to download");return}try{u.length===1?await P.downloadFile(u[0]):await P.downloadFilesAsZip(u,"files.zip"),F.success(`Downloaded ${u.length} file${u.length>1?"s":""}`)}catch(E){console.error("Bulk download error:",E),F.error("Failed to download files")}},j=async()=>{if(u.length===0){F.warning("Please select files to delete");return}try{const _=(await Promise.all(u.map(A=>ge.canDeleteFile(A)))).filter(A=>!A.canDelete),S=_.flatMap(A=>A.warnings),k=_.length===0?{title:"Delete Files",icon:h.jsx(Q,{}),content:`Are you sure you want to delete ${u.length} file${u.length>1?"s":""}?`,okText:"Delete",okType:"danger"}:{title:"Delete Files In Use",icon:h.jsx(Q,{}),content:h.jsxs("div",{children:[h.jsxs("p",{children:[_.length," of ",u.length," selected files are in use:"]}),h.jsxs("ul",{style:{maxHeight:200,overflow:"auto"},children:[S.slice(0,10).map((A,O)=>h.jsx("li",{children:A},O)),S.length>10&&h.jsxs("li",{children:["... and ",S.length-10," more"]})]}),h.jsx("p",{children:"Deleting these files may break scripts. Are you sure?"})]}),okText:"Delete Anyway",okType:"danger"};pe.confirm({...k,onOk:async()=>{try{await Promise.all(u.map(A=>t(A))),F.success(`Deleted ${u.length} file${u.length>1?"s":""}`),i([]),y()}catch(A){console.error("Bulk delete error:",A),F.error("Failed to delete some files")}}})}catch(E){console.error("Bulk delete check error:",E),F.error("Failed to check file usage")}};return h.jsx("div",{style:{padding:24},children:h.jsxs(L,{orientation:"vertical",size:"large",style:{width:"100%"},children:[h.jsxs("div",{children:[h.jsx(Pr,{level:2,children:"File Management"}),h.jsx(Qe,{type:"secondary",children:"Upload and manage all your data files in one place"})]}),h.jsx(bt,{onUploadComplete:y}),h.jsx(st,{children:h.jsxs(L,{orientation:"vertical",size:"middle",style:{width:"100%"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx(ft,{searchTerm:a,onSearchChange:r,fileTypeFilter:c,onFileTypeChange:o,sortBy:l,onSortChange:f,onClear:C}),u.length>0&&h.jsxs(L,{children:[h.jsxs(Qe,{strong:!0,children:[u.length," selected"]}),h.jsx(N,{icon:h.jsx(ot,{}),onClick:I,children:"Download"}),h.jsx(N,{danger:!0,icon:h.jsx(it,{}),onClick:j,children:"Delete"})]})]}),h.jsx(ht,{files:v,fileUsages:s,usagesLoading:b,selectedRowKeys:u,onSelectionChange:i,onPreview:R,onRefresh:y})]})}),h.jsx($t,{file:d,visible:g,onClose:()=>m(!1)})]})})});zr.displayName="Files";export{zr as default};
